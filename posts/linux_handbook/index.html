<!DOCTYPE html>
<html lang="en-us">
    
    


    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    
    <link rel="canonical" href="http://localhost:1313/posts/linux_handbook/">
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.124.1">

    
    
    

<title>Linux 运维手册 • Chang Luo</title>


<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Linux 运维手册"/>
<meta name="twitter:description" content="4202 年了，怎么还有人在写这种东西"/>
      <meta name="twitter:site" content="@MinosPalace"/>

<meta property="og:title" content="Linux 运维手册" />
<meta property="og:description" content="4202 年了，怎么还有人在写这种东西" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/linux_handbook/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-03T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-02-03T00:00:00+00:00" /><meta property="og:site_name" content="Title" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.3081c4981fb69a2783dd36ecfdd0e6ba7a158d4cbfdd290ebce8f78ba0469fc6.css" integrity="sha256-MIHEmB&#43;2mieD3Tbs/dDmunoVjUy/3SkOvOj3i6BGn8Y=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">




<link rel="stylesheet" href="/scss/tocbot.5ef07cebc3c477b54270456f149ee02922479bb7555fd344b2c69f953b0e7e5e.css" integrity="sha256-XvB868PEd7VCcEVvFJ7gKSJHm7dVX9NEssaflTsOfl4=">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class=" ">
    <head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://upcdn.b0.upaiyun.com/libs/jquery/jquery-1.9.0.min.js"></script>

  <style>
    body {
      transition: background-color .5s;
    }

    #overlay {
      position: fixed;
      display: none;
      width: calc(100vw - 580px);
      height: 100%;
      top: 0;
      left: 0;
       
      z-index: 2;
      cursor: pointer;
    }

    .sidenav {
      height: 100%;
      width: 0;
      position: fixed;
      z-index: 1000;
      top: 0;
      right: 0;
      background-color: #FFF;
      overflow: hidden;
      transition: 0.5s;
    }

    #main {
      transition: margin-left .5s;
       
      padding: 16px;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      overflow: hidden;
    }

     
    .tab {
      overflow: hidden;
      border: 1px solid #ccc;
      background-color: #f1f1f1;
    }

     
    .tab button {
      background-color: inherit;
      float: left;
      border: none;
      outline: none;
      cursor: pointer;
      padding: 14px 16px;
      transition: 0.3s;
      font-size: 17px;
    }

     
    .tab button:hover {
      background-color: #ddd;
    }

     
    .tab button.active {
      background-color: #ccc;
    }

     
    .tabcontent {
      display: flex;
      padding: 12px 12px;
      margin: 0;
      border: 1px solid #ccc;
      border-top: none;
      overflow: hidden;
      height: calc(100vh - 90px);
    }

    .dropbtn {
      background-color: #3498DB;
      color: white;
      padding: 16px;
      font-size: 16px;
      border: none;
    }

    .dropup {
      position: relative;
      display: inline-block;
    }

    .dropup-content {
      display: none;
      position: absolute;
      background-color: #f1f1f1;
      min-width: 160px;
      bottom: 50px;
      z-index: 1;
    }

    .dropup-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }

    .dropup-content a:hover {
      background-color: #ccc
    }

    .dropup:hover .dropup-content {
      display: block;
    }

    .dropup:hover .dropbtn {
      background-color: #2980B9;
    }

    #video2,
    #video3 {
      display: none;
    }

    .myiframe {
      height: 100%;
      width: 100%;
    }
  </style>

</head>

<body>

  
  <div class="sidebar">
    <div class="container ">
      <div class="sidebar-about">
        <span class="site__title">
          <a href="http://localhost:1313/">Chang Luo</a>
        </span>
        
        
        
        <div class="author-image">
          <a href="#" class="load-iframe" onclick="openNav()"><img src="http://localhost:1313//images/profile.webp" id="author-iamge"
              alt="Author Image" class="img--circle img--headshot element--center"></a>
        </div>
        
        <p class="site__description">
          
        </p>
      </div>
      <div class="collapsible-menu">
        <input type="checkbox" id="menuToggle">
        <label for="menuToggle">Chang Luo</label>
        <div class="menu-content">
          <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/portfolio/">
						<span>Projects</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About Me</span>
					</a>
				</li>
			 
		
	</ul>
</div>

          <section class="social">
	
	<a href="https://twitter.com/MinosPalace" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	<a href="https://github.com/luochang212" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	<a href="https://instagram.com/suphenshin" rel="me"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://linkedin.com/in/bupt-luochang" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
	
	
	
	
</section>

        </div>
      </div>
      
<div class="copyright">
  &copy; 2024 Chang Luo
  
</div>



    </div>
  </div>

  
  

  <div id="overlay" onclick="off()"></div>

  <div id="mySidenav" class="sidenav">

    <div id="main">
      <div class="tab">
        <button id="default-tab" class="tablinks" onclick="openItem(event, 'Resources')">Resources</button>
        <button class="tablinks" onclick="openItem(event, 'netease-player')">Music</button>
        <button class="tablinks" onclick="openItem(event, 'video-player')">Video</button>
        <button class="tablinks" onclick="openItem(event, 'gallery')">Gallery</button>
        <button class="tablinks" onclick="openItem(event, 'gadget')">Gadget</button>
        <button class="tablinks" onclick="openItem(event, 'categories')">Cats</button>
      </div>

      <div id="Resources" class="tabcontent">
        <iframe class="myiframe"
          src="about:blank"
          data-src="/resources/"
          frameborder="0"
          marginheight="0"
          marginwidth="0"
          scrolling="auto"></iframe>
      </div>

      <div id="netease-player" class="tabcontent">
        <iframe class="myiframe"
          src="about:blank"
          data-src="//music.163.com/outchain/player?type=0&id=2250585392&auto=0&height=430"
          frameborder="no"
          marginheight="0"
          marginwidth="0"
          scrolling="auto"></iframe>
      </div>

      <div id="video-player" class="tabcontent">
        <div id="video1">
          <iframe src="about:blank"
            data-src="//player.bilibili.com/player.html?bvid=BV1Ln4y1d7Z9&p=1&high_quality=1&danmaku=0&autoplay=0"
            style="width:100%; height: 500px"
            scrolling="no"
            frameborder="no"
            framespacing="0"
            allowfullscreen="true"></iframe>
        </div>
        <div id="video2">
          <iframe src="about:blank"
            data-src="//player.bilibili.com/player.html?bvid=BV1rp4y1L7i4&p=1&high_quality=1&danmaku=0&autoplay=0"
            style="width:100%; height: 500px"
            scrolling="no"
            frameborder="no"
            framespacing="0"
            allowfullscreen="true"></iframe>
        </div>
        <div id="video3">
          <iframe src="about:blank"
            data-src="//player.bilibili.com/player.html?bvid=BV1Av4y147QE&p=1&high_quality=1&danmaku=0&autoplay=0"
            style="width:100%; height:500px"
            scrolling="no"
            frameborder="no"
            framespacing="0"
            allowfullscreen="true"></iframe>
        </div>

        

        

        <br>
        <div class="dropup">
          <button class="dropbtn">更多视频</button>
          <div class="dropup-content">
            <a onclick="link1()">ZUTOMYAO</a>
            <a onclick="link2()">岁岁恋</a>
            <a onclick="link3()">真物论</a>
          </div>
        </div>
      </div>

      <div id="gallery" class="tabcontent">
        <iframe class="myiframe"
        src="about:blank"
        data-src="/gadget/gallery/#two"
        frameborder="0"
        marginheight="0"
        marginwidth="0"
        scrolling="auto"></iframe>
      </div>

      <div id="gadget" class="tabcontent">
        <iframe class="myiframe"
        src="about:blank"
        data-src="/tool/"
        frameborder="0"
        marginheight="0"
        marginwidth="0"
        scrolling="auto"></iframe>
      </div>

      <div id="categories" class="tabcontent">
        <iframe class="myiframe"
        src="about:blank"
        data-src="/categories/"
        frameborder="0"
        marginheight="0"
        marginwidth="0"
        scrolling="auto"></iframe>
      </div>
    </div>
  </div>

  
  <script>
    'use strict'

    function openNav() {
      on();
      document.getElementById("mySidenav").style.width = "580px";
      document.body.style.backgroundColor = "rgba(0,0,0,0.5)";
    }

    function closeNav() {
      document.getElementById("mySidenav").style.width = "0";
      document.body.style.backgroundColor = "white";
    }

    function on() {
      document.getElementById("overlay").style.display = "block";
    }

    function off() {
      closeNav();
      document.getElementById("overlay").style.display = "none";
    }

    
    document.getElementById('default-tab').click();

    function openItem(evt, itemName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(itemName).style.display = "block";
      evt.currentTarget.className += " active";
    }

    function link1() {
      document.getElementById("video1").style.display = "block";
      document.getElementById("video2").style.display = "none";
      document.getElementById("video3").style.display = "none";
    }

    function link2() {
      document.getElementById("video1").style.display = "none";
      document.getElementById("video2").style.display = "block";
      document.getElementById("video3").style.display = "none";
    }

    function link3() {
      document.getElementById("video1").style.display = "none";
      document.getElementById("video2").style.display = "none";
      document.getElementById("video3").style.display = "block";
    }

     
    var flag = 0;

     
    $(".load-iframe").click(function () {
      if (flag < 1) {
        $("iframe").each(function () {
          $(this).attr("src", $(this).data("src"));
        });
        flag = flag + 1;
      }
    });
  </script>

</body>



        <div class="content container">
            
    <style>
  .my-emoji {
    height: 25px;
    display: inline-block;
    margin: 0;
    vertical-align: text-bottom;
  }
</style>



<article>
  <header>
    <h1>Linux 运维手册</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Feb 3, 2024
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/devops">DEVOPS</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/bash">bash</a>
           
      
          <a class="badge badge-tag" href="/tags/operations">operations</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 7 min read
</div>


  </header>
  
  
  
  <div class="toc-wrapper">
    <input type="checkbox" id="tocToggle">
    <label for="tocToggle">目录</label>
    
    <div class="toc" id="TableOfContents"></div>
    
  </div>
  
  
  <div class="post">
    <blockquote>
<p>基于 CentOS 系统</p>
</blockquote>
<h3 id="一常见操作">一、常见操作</h3>
<h4 id="1文件操作">1）文件操作</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ls</td>
<td>列出当前文件夹下的文件</td>
</tr>
<tr>
<td>touch [FILE]</td>
<td>创建文件</td>
</tr>
<tr>
<td>vim [FILE]</td>
<td>打开文件</td>
</tr>
<tr>
<td>cat [FILE]</td>
<td>打印文件</td>
</tr>
<tr>
<td>head [FILE]</td>
<td>打印文件头 10 行，展示 20 行用 <code>head -n 20 [FILE]</code></td>
</tr>
<tr>
<td>tail [FILE]</td>
<td>打印文件尾 10 行，展示 20 行用 <code>tail -n 20 [FILE]</code></td>
</tr>
<tr>
<td>tail -f [FILE]</td>
<td>实时查看文件的末尾新增的内容，一般用于打印监控日志</td>
</tr>
<tr>
<td>less [FILE]</td>
<td>打印文件，可以用 <code>上键</code> <code>下键</code> 翻页</td>
</tr>
<tr>
<td>rm [FILE]</td>
<td>删除文件</td>
</tr>
<tr>
<td>rm -rf [DIR]</td>
<td>递归删除路径<code>DIR</code>下所有文件</td>
</tr>
<tr>
<td>mv [FILE_A] [FILE_B]</td>
<td>文件<code>FILE_A</code>改名为<code>FILE_B</code></td>
</tr>
<tr>
<td>mv [FILE] [DIR]</td>
<td>文件<code>FILE</code>移动到路径<code>DIR</code></td>
</tr>
<tr>
<td>cd [PATH]</td>
<td>打开目录<code>PATH</code></td>
</tr>
<tr>
<td>mkdir [PATH]</td>
<td>创建目录</td>
</tr>
<tr>
<td>mkdir -p [PATH/TO/DIR]</td>
<td>创建多级目录</td>
</tr>
<tr>
<td>tar cvf file.tar ./data</td>
<td>把 <code>data</code> 目录 压缩成 <code>file.tar</code> 文件</td>
</tr>
<tr>
<td>tar xvf file.tar</td>
<td>解压 <code>file.tar</code> 文件</td>
</tr>
</tbody>
</table>
<h4 id="2网络操作">2）网络操作</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>lsof -i</td>
<td>显示所有与网络连接有关的进程及其打开的端口信息</td>
</tr>
<tr>
<td>ifconfig</td>
<td>查看有效的网络接口的状态</td>
</tr>
<tr>
<td>ifconfig -a</td>
<td>查看所有的网络接口的状态</td>
</tr>
<tr>
<td>arp -a</td>
<td>查看局域网中设备的ip地址</td>
</tr>
<tr>
<td>ping [SERVER_IP]</td>
<td>检查远端服务器连通性</td>
</tr>
<tr>
<td>telnet [SERVER_IP] [SERVER_PORT]</td>
<td>检查远端服务器的端口的连通性</td>
</tr>
<tr>
<td>hostname -I</td>
<td>awk &lsquo;{print $1}&rsquo;</td>
</tr>
<tr>
<td>wget [URL]</td>
<td>下载文件到当前路径</td>
</tr>
<tr>
<td>curl [URL]</td>
<td>访问网页</td>
</tr>
<tr>
<td>netstat -tnpl</td>
<td>显示TCP类型的端口</td>
</tr>
<tr>
<td>netstat -unpl</td>
<td>显示UDP类型的端口</td>
</tr>
<tr>
<td>netstat -r</td>
<td>显示路由表信息</td>
</tr>
<tr>
<td>netstat -g</td>
<td>显示多重广播功能群组组员名单</td>
</tr>
<tr>
<td>netstat -s</td>
<td>显示按协议分类统计信息</td>
</tr>
<tr>
<td>netstat -l</td>
<td>显示所有监听端口</td>
</tr>
<tr>
<td>netstat -n</td>
<td>使用域名解析，将域名解析成ip地址</td>
</tr>
<tr>
<td>netstat -p</td>
<td>显示程序名和进程PID</td>
</tr>
<tr>
<td>netstat -t</td>
<td>显示所有的tcp协议的端口</td>
</tr>
<tr>
<td>netstat -u</td>
<td>显示所有的udp协议的端口</td>
</tr>
<tr>
<td>ssh -p [SERVER_PORT] [USER]@[SERVER_IP]</td>
<td>ssh连接远端服务器</td>
</tr>
<tr>
<td>ssh-keygen -R [SERVER_IP]</td>
<td>同IP机器重装后重连前注销老host</td>
</tr>
<tr>
<td>dig [example.com]</td>
<td>是 Linux 系统用于查询 DNS 信息的工具</td>
</tr>
</tbody>
</table>
<h4 id="3系统操作">3）系统操作</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>top</td>
<td>查看CPU占用率</td>
</tr>
<tr>
<td>hostname</td>
<td>查看主机名</td>
</tr>
<tr>
<td>uname -m</td>
<td>查看linux架构</td>
</tr>
<tr>
<td>uname -a</td>
<td>查看系统详细信息</td>
</tr>
<tr>
<td>cat /etc/centos-release</td>
<td>查看centos版本</td>
</tr>
<tr>
<td>ps aux</td>
<td>查看进程</td>
</tr>
<tr>
<td>ps -ef</td>
<td>查看进程</td>
</tr>
<tr>
<td>kill -9 [PID]</td>
<td>杀掉进程<code>[PID]</code></td>
</tr>
<tr>
<td>df -h</td>
<td>查看磁盘空间</td>
</tr>
<tr>
<td>du -h / | sort -rh</td>
<td>根据文件磁盘占用倒排</td>
</tr>
<tr>
<td>history</td>
<td>查看历史命令</td>
</tr>
<tr>
<td>type [CMD]</td>
<td>查看命令所在路径，如<code>type mkdir</code></td>
</tr>
<tr>
<td>echo $LANG</td>
<td>查看字符编码</td>
</tr>
<tr>
<td>su -</td>
<td>切换到root用户</td>
</tr>
</tbody>
</table>
<h4 id="4文本处理">4）文本处理</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>awk</td>
<td>取列</td>
</tr>
<tr>
<td>awk -F</td>
<td>指定分割符取列</td>
</tr>
<tr>
<td>grep -v</td>
<td>查找不包含特定匹配模式的行</td>
</tr>
<tr>
<td>wc -l</td>
<td>输出文件的行数</td>
</tr>
<tr>
<td>echo &ldquo;ABC&rdquo; &gt; [FILE]</td>
<td>将文本<code>ABC</code>写入文件<code>FILE</code>行尾</td>
</tr>
<tr>
<td>echo &ldquo;ABC&rdquo; &raquo; [FILE]</td>
<td>用文本<code>ABC</code>覆写文件<code>FILE</code></td>
</tr>
</tbody>
</table>
<h4 id="5bash-表达式">5）Bash 表达式</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-gt</td>
<td>大于</td>
</tr>
<tr>
<td>-lt</td>
<td>小于</td>
</tr>
<tr>
<td>-eq</td>
<td>等于</td>
</tr>
<tr>
<td>-ne</td>
<td>不等于</td>
</tr>
<tr>
<td>-ge</td>
<td>大于等于</td>
</tr>
<tr>
<td>-le</td>
<td>小于等于</td>
</tr>
<tr>
<td>!</td>
<td>非</td>
</tr>
<tr>
<td>==</td>
<td>等于</td>
</tr>
<tr>
<td>=～</td>
<td>正则匹配，等式右侧写正则表达式</td>
</tr>
<tr>
<td>-a file</td>
<td>如果file存在则为真</td>
</tr>
<tr>
<td>-d file</td>
<td>如果file存在且为目录则为真</td>
</tr>
<tr>
<td>-f file</td>
<td>如果file存在且为普通文件则为真</td>
</tr>
<tr>
<td>sleep 1m</td>
<td>休眠一分钟</td>
</tr>
<tr>
<td>export PATH=[/some/new/path]:$PATH</td>
<td>新增环境变量<code>/some/new/path</code></td>
</tr>
<tr>
<td>$#</td>
<td>保存传递给shell脚本的命令行参数的数量</td>
</tr>
<tr>
<td>$*</td>
<td>保存所有传递给shell脚本的命令行参数 ($1 $2 &hellip;)</td>
</tr>
<tr>
<td>$@</td>
<td>保存所有传递给shell脚本的命令行参数 (&quot;$1&quot; &ldquo;$2&rdquo; &hellip;)</td>
</tr>
<tr>
<td>$0</td>
<td>保存shell脚本的名字</td>
</tr>
<tr>
<td>$?</td>
<td>保存上一个执行的命令的退出码</td>
</tr>
<tr>
<td>set -x</td>
<td>脚本调试命令，会打印当前脚本执行的所有命令及其参数</td>
</tr>
</tbody>
</table>
<h4 id="6vim-命令">6）vim 命令</h4>
<p>以下命令需用 <code>vim</code> 打开文件，再按 <code>esc</code> 后输入，再按 <code>enter</code> 执行</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>切换到编辑模式。唯独这个直接按<code>a</code>就行，不用先按<code>esc</code></td>
</tr>
<tr>
<td>:q</td>
<td>退出文档，不保存</td>
</tr>
<tr>
<td>:q!</td>
<td>强制退出文档</td>
</tr>
<tr>
<td>:x</td>
<td>保存后退出</td>
</tr>
<tr>
<td>:wq!</td>
<td>强制保存退出</td>
</tr>
<tr>
<td>:set paste</td>
<td>切换到粘贴模式</td>
</tr>
<tr>
<td>/[TEXT]</td>
<td>查找<code>[TEXT]</code>，按<code>n</code>下一个</td>
</tr>
<tr>
<td>:help</td>
<td>打开帮助文档</td>
</tr>
</tbody>
</table>
<h3 id="二后台运行">二、后台运行</h3>
<p>后台运行 Bash 命令的两种方式：</p>
<ol>
<li><code>[CMD] &amp;</code>: 后台运行，关掉终端会停止运行</li>
<li><code>nohup [CMD] &amp;</code>: 后台运行，关掉终端不会停止运行</li>
</ol>
<h3 id="三快捷指令">三、快捷指令</h3>
<p>在 MacOS 终端用 短指令 替代 长指令，可以用 <code>alias</code>，步骤如下：</p>
<p>首先打开 <code>~/.bash_profile</code> 配置文件，添加以下内容：</p>
<pre tabindex="0"><code># alias
# remote server
user=[REMOTE_SERVER_USERNAME]
ip=[REMOTE_SERVER_IP]

alias login=&#34;ssh -p 22 ${user}@${ip}&#34;
alias jupyter=&#34;ssh -L9999:localhost:8888 ${user}@${ip}&#34;
</code></pre><p>然后在终端运行：</p>
<pre tabindex="0"><code>source ~/.bash_profile
</code></pre><p>此时，<code>login</code> 和 <code>jupyter</code> 两个短指令，就能替代等式右侧的两个长指令了。</p>
<blockquote>
<p><strong>Note</strong>: CentOS 系统同理，区别是 CentOS 的配置文件是 <code>~/.bashrc</code></p>
</blockquote>
<h3 id="四用户系统">四、用户系统</h3>
<p><strong>创建</strong> 一个系统用户，其中 <code>-m</code> (&ndash;create-home) 参数可选。</p>
<pre tabindex="0"><code># 创建用户使用如下命令
useradd [USERNAME]
# 或
useradd -m [USERNAME]
</code></pre><p>选项 <code>-m</code> 代表创建用户时，为用户创建 <code>/home/[USERNAME]</code> 目录。</p>
<p><strong>验证</strong> 系统用户是否存在：</p>
<pre tabindex="0"><code>id [USERNAME]
</code></pre><p><strong>改密</strong>：</p>
<pre tabindex="0"><code>passwd [USERNAME]
</code></pre><p><strong>删除</strong> 系统用户：</p>
<pre tabindex="0"><code>userdel [USERNAME]
</code></pre><p><strong>切换</strong> 系统用户：切换到用户 <code>[USERNAME]</code></p>
<pre tabindex="0"><code>su [USERNAME]
</code></pre><h3 id="五环境部署">五、环境部署</h3>
<h4 id="1更新-yum">1）更新 <code>yum</code></h4>
<pre tabindex="0"><code>yum update -y
yum upgrade -y

yum --version
</code></pre><h4 id="2安装-java">2）安装 <code>java</code></h4>
<pre tabindex="0"><code>yum install -y java-1.8.0-openjdk

# 验证 java 是否安装成功
java -version  
</code></pre><h4 id="3安装-pip3">3）安装 <code>pip3</code></h4>
<pre tabindex="0"><code>yum install epel-release
yum install python3-pip
pip3 install --upgrade pip

# 验证 pip3 是否安装成功
pip3 --version
</code></pre><h4 id="4安装-jupyter-和-notebook">4）安装 <code>jupyter</code> 和 <code>notebook</code></h4>
<pre tabindex="0"><code>pip3 install jupyter notebook

# 验证 jupyter notebook 是否安装成功
jupyter notebook --allow-root
</code></pre><h4 id="5安装-miniconda3">5）安装 <code>miniconda3</code></h4>
<p>参考：<a href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/linux.html" target="_blank">docs.conda.io</a></p>
<pre tabindex="0"><code># 安装
mkdir -p ~/miniconda3
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh
bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
rm -rf ~/miniconda3/miniconda.sh

# 初始化 bash 文件
~/miniconda3/bin/conda init bash
~/miniconda3/bin/conda init zsh

# 使 bash 文件生效
source ~/.bashrc

# 验证 miniconda3 是否安装成功
conda info --envs
which python

# 打开 jupyter notebook
jupyter notebook
jupyter notebook --allow-root  # 在 root 环境打开
nohup jupyter notebook --allow-root &amp;  # 在后台挂着
</code></pre><h4 id="6安装-rust">6）安装 <code>rust</code></h4>
<p>参考：<a href="https://www.rust-lang.org/tools/install" target="_blank">rust-lang.org</a></p>
<pre tabindex="0"><code># 安装
curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre><p>运行 <code>vim ~/.bashrc</code>，将以下内容添加到 <code>.bashrc</code> 文件中</p>
<pre tabindex="0"><code>rust_bin=~/.cargo/bin
if [[ ! $rust_bin =~ [*$PATH*] ]]; then
    export PATH=$rust_bin:$PATH
fi
</code></pre><p>运行 <code>source ~/.bashrc</code>，以初始化环境变量</p>
<blockquote>
<p><strong>Note</strong>: 卸载 rustup</p>
<pre tabindex="0"><code>rustup self uninstall
</code></pre></blockquote>
<h4 id="7miniconda3-换-kernal">7）<code>miniconda3</code> 换 Kernal</h4>
<p>安装依赖</p>
<pre tabindex="0"><code>pip install ipykernel
</code></pre><p>创建虚拟环境</p>
<pre tabindex="0"><code>conda create -n py27 python=2.7  # 创建名为 py27 的 Python 2.7 新环境
conda activate py27  # 激活新环境

# 为当前 Python 环境安装 ipykernel
python -m pip install ipykernel

# 将新环境加入 jupyter notebook 的 kernel 中
python -m ipykernel install --user --name py27 --display-name &#34;Python (py27)&#34;
</code></pre><p>随便创建一个 <code>.ipynb</code> 文件，在导航栏点击：Kernel -&gt; Change Kernel -&gt; Python (py27)</p>
<p><img src="/img/change_kernel.png" alt=""></p>
<p>检查新 kernel 是否生效，在 jupyter notebook 运行</p>
<pre tabindex="0"><code>import sys
sys.executable
</code></pre><p>输出：<code>'/home/[USER_NAME]/miniconda3/envs/py27/bin/python'</code></p>
<h3 id="六文件传输">六、文件传输</h3>
<h4 id="1使用-scp">1）使用 SCP</h4>
<blockquote>
<p>用于 远端服务器 之间互传文件。</p>
</blockquote>
<pre tabindex="0"><code>scp [SOURCE_FILE] [USERNAME]@[DESTINATION_SERVER_IP]:[/PATH/TO/DIR]
</code></pre><p>上述命令的含义是：</p>
<p>把当前路径下的 <code>[SOURCE_FILE]</code> <strong>文件</strong> 传到 <code>[DESTINATION_SERVER_IP]</code> <strong>主机</strong> 的 <code>[USERNAME]</code> <strong>用户</strong> 的 <code>[/PATH/TO/DIR]</code> <strong>目录</strong> 下。</p>
<p>举个栗子 (=ﾟωﾟ)= 🌰</p>
<pre tabindex="0"><code>scp data.tar jane@:132.43.75.194:/home/jane/code
</code></pre><blockquote>
<p><strong>注意</strong>：SCP 只能传单个文件，不能传文件夹。传文件夹可以把它压缩成 <code>tar</code> 文件再传</p>
</blockquote>
<h4 id="2使用-rc-和-sz">2）使用 <code>rc</code> 和 <code>sz</code></h4>
<blockquote>
<p>用于 远端服务器 与 本地电脑 互传文件。</p>
</blockquote>
<p>安装依赖：</p>
<pre tabindex="0"><code>yum -y install lrzsz
</code></pre><p>传输命令：</p>
<ul>
<li><code>rc</code> (receive zmodem): 上传到服务器</li>
<li><code>sz</code> (send zmodem): 下载到本地</li>
</ul>
<p>常见参数：</p>
<ul>
<li><code>-a</code>: 以文本形式传输 (ASCII)，如果可以确认传输的是文本，可选此参数</li>
<li><code>-b</code>: 以二进制形式传输 (BINARY)</li>
<li><code>-e</code>: 对控制字符转义，以保证文件传输正确</li>
</ul>
<p>可以用 <code>rc --help</code> 查看更多参数。</p>
<blockquote>
<p><strong>Note</strong>: <code>rc</code> <code>sz</code> 需要配合客户端使用</p>
<ul>
<li>Windows 推荐用 <code>Xshell</code></li>
<li>MacOS 推荐用 <code>SecureCRT</code></li>
</ul>
</blockquote>
<h4 id="3使用-samba">3）使用 Samba</h4>
<blockquote>
<p>用于 远端服务器 与 本地电脑 互传文件。</p>
</blockquote>
<p>查看是否已经安装 Samba</p>
<ul>
<li>CentOS: <code>rpm -qa | grep samba</code></li>
<li>Ubuntu: <code>dpkg -l | grep samba</code></li>
</ul>
<p>① 安装依赖</p>
<ul>
<li>CentOS: <code>yum install -y samba samba-client samba-common</code></li>
<li>Ubuntu: <code>sudo apt install -y samba samba-client</code></li>
</ul>
<p>请确保系统至少有一个用户，以下命令用于确认是否有名为 <code>[USER]</code> 的用户：</p>
<pre tabindex="0"><code>id [USER]
</code></pre><p><code>&gt; uid=1000([USER]) gid=1000([USER]) groups=1000([USER])</code></p>
<p>② 创建 Samba 用户，Samba 用户必须是系统实际存在的用户</p>
<p>为用户设置 Samba 密码</p>
<pre tabindex="0"><code>smbpasswd -a [USER]
</code></pre><p>按提示要求，输入 Samba 账号密码即可。</p>
<ul>
<li>查看 Samba 服务器中已拥有哪些用户: <code>pdbedit -L</code></li>
<li>删除 Samba 服务中的某个用户: <code>smbpasswd -x [用户名]</code></li>
</ul>
<p>③ 创建分享文件夹</p>
<p>在目录 <code>/share/</code> 下新建名为 <code>sambashare</code> 的文件夹</p>
<pre tabindex="0"><code>mkdir -p /share/sambashare
</code></pre><p>修改分享文件夹的权限</p>
<pre tabindex="0"><code>chmod 777 /share/sambashare
</code></pre><p>④ 修改 Samba 配置文件</p>
<p>运行 <code>vim /etc/samba/smb.conf</code> 打开配置文件，并添加以下内容，注意 <code>valid users</code> 是指定允许访问的用户。</p>
<pre tabindex="0"><code>[global]
        workgroup = SAMBA
        security = user

        passdb backend = tdbsam

        printing = cups
        printcap name = cups
        load printers = yes
        cups options = raw

[homes]
        comment = Home Directories
        valid users = %S, %D%w%S
        browseable = No
        read only = No
        inherit acls = Yes

[printers]
        comment = All Printers
        path = /var/tmp
        printable = Yes
        create mask = 0600
        browseable = No

[print$]
        comment = Printer Drivers
        path = /var/lib/samba/drivers
        write list = @printadmin root
        force group = @printadmin
        create mask = 0664
        directory mask = 0775

[sambashare]
        comment = share folder
        path = /share/sambashare
        browseable = yes
        writable = yes
        read only = no
        guest ok = yes
        create mask = 0777
        directory mask = 0777
        public = yes
        valid users = root
</code></pre><p>⑤ 重启 Samba 服务</p>
<p>CentOS 6</p>
<pre tabindex="0"><code>$ sudo systemctl restart smb
$ sudo systemctl enable smb
</code></pre><p>CentOS 7</p>
<pre tabindex="0"><code>$ sudo systemctl start smb.service     # 启动 samba
$ sudo systemctl restart smb.service   # 重启 samba
$ sudo systemctl enable smb.service    # 设置开机自动启动
$ sudo systemctl status smb.service    # 查询 samba 状态
</code></pre><p>Ubuntu 16.04.3</p>
<pre tabindex="0"><code>$ sudo service smbd restart
</code></pre><p>重启后检查 smb 服务是否启动，两种方法：</p>
<p>1）用 <code>systemctl</code></p>
<pre tabindex="0"><code># 查询 Samba 服务的状态
$ systemctl status smb
</code></pre><p>2）用 <code>smbclient</code></p>
<pre tabindex="0"><code>smbclient //localhost/sambashare -U root
</code></pre><p>输入 smb 用户密码，如果显示 <code>smb: \&gt;</code> 则表示成功。</p>
<p>⑥ 端口加白</p>
<p>查看 Samba 服务占用的端口：</p>
<pre tabindex="0"><code>netstat -tnpl | grep smb  # TCP 端口
netstat -unpl | grep smb  # UDP 端口
</code></pre><p>然后在 PaaS 服务供应商处为对应端口加白。</p>
<p>⑦ 测试端口连通性</p>
<p>在本地命令行执行以下命令，确认远端服务器的端口可连通：</p>
<pre tabindex="0"><code>telnet [SERVER_IP] [SERVER_PORT]
</code></pre><p>⑧ 本地电脑连接 smb 服务</p>
<p><strong>MacOS 系统</strong>：在访达中输入快捷键 <code>CMD+K</code> 打开 <code>Connect to Server</code> 页面</p>
<p><img src="/img/connect_to_server.png" alt=""></p>
<p>输入 <code>smb://[YOUR_SERVER_IP]/sambashare</code> 点击 <code>Connect</code> 连接你的 smb 服务。</p>
<p><strong>Windows 系统</strong>：在文件地址导航栏输入 <code>\\[YOUR_SERVER_IP]</code> 后回车。</p>
<h3 id="七例行任务">七、例行任务</h3>
<p><strong>查看</strong> 例行任务配置文件：</p>
<pre tabindex="0"><code>crontab -l
</code></pre><p><strong>修改</strong> 例行任务配置文件：</p>
<pre tabindex="0"><code>crontab -e
</code></pre><p>例行任务的执行时间：</p>
<ul>
<li>定时任务的执行时间由 5 个值决定，形如 <code>1 3 * * *</code></li>
<li>5 个值的含义分别是：<code>[minute] [hour] [day of month] [month] [day of week]</code></li>
<li>表达方式：
<ul>
<li><code>*</code>: 代表每一（天）执行，取值 1, 2, 3, &hellip;</li>
<li><code>*/2</code>: 代表每两（天）执行，取值 0, 2, 4, &hellip;</li>
<li><code>3-5</code>: 代表取值 3, 4, 5</li>
</ul>
</li>
</ul>
<p>下面是五个例子：</p>
<pre tabindex="0"><code>1 3 * * *  [CMD]   # 每天凌晨 3 点 1 分执行任务
1 3 * * 2-4  [CMD]   # 周二、周三、周四的凌晨 3 点 1 分执行任务
1 3 15 * *  [CMD]   # 每个月 15 号的凌晨 3 点 1 分执行任务
0 */2 * * *  [CMD]   # 每隔两个小时，在整点执行任务，时间取 0点、2点、4点 ...
1 3 15 3 *  [CMD]   # 每年 3 月 15 号的凌晨 3 点 1 分执行任务
</code></pre><p>可以在 <a href="https://crontab.guru" target="_blank">crontab.guru</a> 上调试。</p>
<blockquote>
<p><strong>Note</strong>: 注意，cron 不在命令行环境中运行，需单独为 cron 初始化环境变量</p>
</blockquote>
<h3 id="八端口映射">八、端口映射</h3>
<p>将远端服务器的端口映射到本地电脑上：</p>
<pre tabindex="0"><code>ssh -L[LOCAL_PORT]:localhost:[REMOTE_PORT] [USER]@[SERVER_IP]
</code></pre><blockquote>
<p><strong>Note</strong>: 举例，命令 <code>ssh -L9999:localhost:8888 musk@132.43.75.194</code></p>
<p>的含义是把远端服务器 <code>132.43.75.194</code> 上的用户 <code>musk</code> 的 <code>8888</code> 端口，映射到本地 <code>9999</code> 端口。</p>
</blockquote>
<!-- ### 发邮件

把下面的 `[YOUR-CONTENT-HERE]` 换成邮件内容，把 `[YOUR-EMAIL-HERE]` 换成收件邮箱，然后运行

```
echo "[YOUR-CONTENT-HERE]" | formail \
    -I "MIME-Version:1.0" \
    -I "Content-type:text/html;charset=utf8" -I "Subject:$1" | \
    sendmail -oi [YOUR-EMAIL-HERE]
```

> **Note**: 运行前可能需要安装依赖
>
> ```
> yum install procmail -y
> ``` -->
<h3 id="九文件系统">九、文件系统</h3>
<p>安装一个叫 <code>tree</code> 的命令行工具，它能打印目录结构</p>
<pre tabindex="0"><code>yum install tree
</code></pre><p>限制打印目录深度为 1 层：</p>
<pre tabindex="0"><code>tree -L 1
</code></pre><pre tabindex="0"><code>.
├── bin -&gt; usr/bin: 包含了很多基础 shell 命令的可执行文件，如 cp, mkdir
├── boot: 系统内核和启动镜像
├── dev: 包含关于设备的特殊文件，如 random, null
├── etc: 包含系统配置文件
├── home: 用户个人数据
├── lib -&gt; usr/lib: 系统软件库，一般被 /bin 和 /sbin 路径下的可执行文件调用
├── lost+found: 文件系统发生错误后找回数据用的
├── media: 移动磁盘插入时，会在此目录下生成磁盘路径
├── mnt: 与 /media 类似，但不会自动挂载磁盘，而由系统管理员手动挂载
├── opt: 存储系统和外部软件代码，对应的可执行文件一般在 /bin
├── proc: 当前运行程序与内核信息，如 cpuinfo, meminfo, [PID]
├── root: root的根目录
├── run: 存放运行时信息，与 /var/run 关系密切
├── sbin -&gt; usr/sbin: 与 /bin 类似，但只允许 root 访问
├── srv: 存放由服务器的服务产生的数据
├── sys: 虚拟的文件夹，存在于内存中，随系统启动创建，包含 内核、内存、驱动 等信息
├── tmp: 用于存放临时文件，系统重启时清空
├── usr: 软件安装路径
└── var: 运行时信息，如登录信息 (/var/log/wtmp)。系统不会自动清理此目录
</code></pre><h3 id="十推荐的书">十、推荐的书</h3>
<ul>
<li><a href="https://book.douban.com/subject/10747453/">UNIX/Linux 系统管理技术手册</a></li>
<li><a href="https://github.com/judasn/Linux-Tutorial">judasn / Linux-Tutorial</a></li>
<li><a href="https://dunwu.github.io/linux-tutorial">dunwu / linux-tutorial</a></li>
</ul>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/inventory_list/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">居家物资清单</span>
    </a>
    
    
    <a href="/posts/d2l_from_scratch/" class="navigation-next">
      <span class="navigation-tittle">手写深度学习</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>

        </div>
        
    <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>






<script defer src="https://use.fontawesome.com/releases/v5.12.1/js/all.js" integrity="sha384-ZbbbT1gw3joYkKRqh0kWyRp32UAvdqkpbLedQJSlnI8iLQcFVxaGyrOgOJiDQTTR" crossorigin="anonymous"></script>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    



<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.js"></script>
<script type="text/javascript">
  if (tocbot) {
    tocbot.init({
      
      tocSelector: '.toc',
      
      contentSelector: '.post',
      
      headingSelector: 'h2, h3, h4',
      collapseDepth: 4
    });
  }
</script>



    



    </body>
</html>
