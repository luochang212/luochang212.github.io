<!DOCTYPE html>
<html>

<head>
    <title>dictionary.js</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta name="description" content="dictionary extension">
    <meta name="keywords" content="dictionary,Goole Chrome,extension,JavaScript">
    <meta name="author" content="Chang Luo">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/dictionary/style.css">
    <script src="./src/jquery/3.4.1/jquery-3.4.1.min.js"></script>
</head>

<body>

    hello, world!

    你好，世界

    <span>hello, world!</span>

    <div>你好，世界</div>

    <div id="txt">"My text is long and wise and it consumes a lot of interwebs."</div>


    <div id="out"></div>
    <div id="out-1"></div>
    <div id="out-2"></div>
    <div id="out-3"></div>

    <div id="container"></div>

    <script>

        
        var selectedTxt = '';

        function getSelectedTxt() {
            selectedTxt = '';
            if (window.getSelection) {
                selectedTxt = window.getSelection().toString();
            } else if (document.selection) {
                selectedTxt = document.selection.createRange().text;
            }
            document.getElementById("out").innerHTML = selectedTxt;
        }


        
        function compareWords() {
            $.getJSON("./src/chinese-xinhua/data/word.json", function (data) {
                $.each(data, (key, val) => {
                    if (val.word === selectedTxt) {
                        printResult(parseInt(key, 10), val);
                        return;
                    }
                });
            });
        }

        function printResult(key, value) {
                document.getElementById('out-1').innerHTML = value.pinyin;
                document.getElementById('out-2').innerHTML = value.explanation;
                document.getElementById('out-3').innerHTML = value.more;
        }

        document.addEventListener('click', () => {
            getSelectedTxt();
            compareWords();
        });

    </script>
</body>

</html>